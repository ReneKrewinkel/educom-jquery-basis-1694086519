<!DOCTYPE html>
<html lang="en">
  <head>   
    <link rel="stylesheet" href="css/style.css">
    <script src="js/jquery.js"></script>
    <script>
      $(document).ready( function() {
        
        $(".star").click( function(){
          const value = $(this).attr("data-value")
        
          $.ajax({
            url: "https://api.dev-master.ninja/js/rating",
            method: "POST",
            data: { rating:value},
            success: function(result){

                let gemiddelde = result.result
                
                // clear all the reds
                $(".star").removeClass("red")

                // paint it red
                $(".star").each((index, elem) => {
                const itemValue = $(elem).attr("data-value")
                if (itemValue <= gemiddelde) {
                    $(elem).addClass("red")

            }
          })
            }
          })
        })
      });    
    </script>
  </head>
  <body>
     <span class="star" data-value="1">*</span>
     <span class="star" data-value="2">*</span>
     <span class="star" data-value="3">*</span>
     <span class="star" data-value="4">*</span>
     <span class="star" data-value="5">*</span>

  </body>
</html>
